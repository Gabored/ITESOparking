from tkinter import *
import tkinter as tk
import pyrebase
config = {
  "apiKey": "AIzaSyA1ijWIJ8vBWiDNm7AV4ZC1Dk4UpHQUvqs",
  "authDomain": "iteso-parking.firebaseapp.com",
  "databaseURL": "https://iteso-parking.firebaseio.com",
  "storageBucket": "iteso-parking.appspot.com",
  "serviceAccount": "E:\GitHub\ITESOparking\juan.json"
}
firebase = pyrebase.initialize_app(config)
active_user = ''
db = firebase.database()
all_users = db.child("Usuarios").get()
def logIn():
    usr = userio.get()
    passw = password.get()

    for user in all_users.each():
        if usr == str(user.key()):
            if passw == user.val().get('password'):
                print("Log exitoso")
                active_user = usr
                return True
            else:
                return False





canvas = Canvas(0, width=1472, height=729)
frame = Frame(0, width=1008,height=500)
frame.pack()
canvas_iteso_logo = Canvas(0, width=224,height=182)
canvas_iteso_logo.pack()
img2 = PhotoImage(file='liteso.ppm')
canvas_iteso_logo.create_image(0,0,anchor=NW, image=img2)
img = PhotoImage(file='arboles.ppm')
canvas.create_image(0,0,anchor=NW, image=img)

canvas.pack()

userio =tk.StringVar()
password = tk.StringVar()

def entry(txt):
    l=tk.Label(frame,text=txt,width=32)
    l.pack()
    e = tk.Entry(frame,text=txt,width=32,textvariable = userio)
    e.pack()



user = entry("Username")

j = tk.Label(frame,text = "Password",width=32).pack()
e=tk.Entry(frame,show="*",text = "Password",width=32,textvariable = password).pack()
button =tk.Button(frame,text="Login", command = logIn)
button.pack()
signbutton =tk.Button(frame,text="Sign Up")
signbutton.pack()

canvas.create_window(600, 282, anchor=NW, window=frame)
canvas.create_window(600, 100, anchor='nw', window=canvas_iteso_logo)
canvas.mainloop()